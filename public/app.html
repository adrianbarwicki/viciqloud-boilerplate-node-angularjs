<html>
<head>
    <title>ViciQloud Boilerplate</title>
</head>    
<body ng-app="app" ng-controller="mainCtrl as vm">


    <h1>{{vm.title}}</h1>
    <p>{{vm.subtitle}}</p>
    <h2>Random number: {{vm.randomNumber }}</h2>
    <h2>Random number (one-binding): {{ ::vm.randomNumber }}</h2>    


     <p>Visit our page under <a href="https://viciqloud.com">https://viciqloud.com</a></p>
</body>

<script src="/libs/angular/angular.min.js" />

<script>
(function(){
    angular.module("app",[])

    .controller("mainCtrl",mainCtrl);

    .service("apiService",apiService);

    .constant("myApiUrl","http://localhost:8080");


    mainCtrl.$inject=["apiService"];
    function mainCtrl(apiService){
        this.title = "Hello World!";
        this.subtitle = "This is small app combining Angular and NodeJS written for educational purposes!";

        apiService.fetchRandomNumberFromServer(onDataFetched);

        function onDataFetched(randomNumber){
            this.randomNumber = randomNumber;
        }

    }


    apiService.$inject = ["$http","myApiUrl"];
    function apiService($http,myApiUrl){
    
    return {
        fetchRandomNumberFromServer : fetchRandomNumberFromServer
    }

    function fetchRandomNumberFromServer(callback){
            $http.get(myApiUrl+"/get-random-number").then(function(response){
            console.log(response);
            callback(response.data.randomNumber);
    });
    }

}
}());
</script>

</html>